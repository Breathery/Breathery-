<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monitoring Kesehatan Pernapasan - Breathory</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #f7f3fa;
      color: #4a306d;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    header {
      background-color: #cdb4db;
      color: #fff;
      padding: 20px;
      border-radius: 0 0 20px 20px;
    }
    section {
      margin: 30px auto;
      width: 90%;
      max-width: 720px;
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
      text-align: left;
    }
    #halamanInformasi {
      background-image: url('https://rsko-jakarta.com/rahasia/assets/upload/Desain_tanpa_judul_(26).png');
      background-size: cover;
      background-position: center;
    }
    #halamanInformasi::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255,255,255,0.60);
      border-radius: 15px;
      z-index: 1;
    }
    #halamanInformasi * { position: relative; z-index: 2; }
    select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
      border: 1px solid #b495c9;
      font-size: 15px;
    }
    button {
      background-color: #b495c9;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover { background-color: #9c7ebd; }
    #infoPenyakit {
      margin-top: 20px;
      background: #f5edfa;
      padding: 15px;
      border-radius: 10px;
      text-align: left;
    }
    .hidden { display: none; }
    .pertanyaan { text-align: left; margin: 12px 0; }
    .pertanyaan label { margin-right: 12px; cursor: pointer; }
    .hasil-card {
      background: linear-gradient(180deg,#fff,#fbf8ff);
      border-radius: 12px;
      padding: 16px;
      border: 1px solid rgba(148,122,189,0.12);
    }
    .hasil-title { color: #4a306d; font-weight: 700; margin-bottom: 8px; }
  </style>
</head>
<body>

<header>
  <h1>‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ<br>Breathory<br>‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ</h1>
  <p>Pelajari penyakit pernapasan dan lakukan tes kesehatanmu!</p>
</header>

<section id="halamanInformasi">
  <h2>ü´Å Informasi Penyakit Pernapasan</h2>
  <p>Pilih penyakit untuk melihat informasinya:</p>

  <select id="penyakitSelect">
    <option value="">-- Pilih penyakit --</option>
    <option value="asma">Asma</option>
    <option value="bronkitis">Bronkitis</option>
    <option value="ppok">PPOK</option>
    <option value="kanker">Kanker Paru-Paru</option>
    <option value="pneumonia">Pneumonia</option>
  </select>

  <div id="infoPenyakit" class="hidden"></div>
  <br>
  <button onclick="bukaTes()">ü©∫ Tes Kesehatan Pernapasan</button>
</section>

<section id="halamanTes" class="hidden">
  <h2>ü©∫ Tes Kesehatan Pernapasan</h2>
  <p>Jawab pertanyaan berikut dengan memilih <strong>Yes</strong> atau <strong>No</strong>.</p>

  <form id="formTes">
    <div class="pertanyaan">
      1. Apakah Anda mengalami batuk berkepanjangan?
      <br>
      <label><input type="radio" name="batuk" value="yes"> Yes</label>
      <label><input type="radio" name="batuk" value="no"> No</label>
    </div>

    <div class="pertanyaan">
      2. Apakah Anda mengalami sesak napas?
      <br>
      <label><input type="radio" name="sesak" value="yes"> Yes</label>
      <label><input type="radio" name="sesak" value="no"> No</label>
    </div>

    <div class="pertanyaan">
      3. Apakah Anda mudah lelah saat aktivitas ringan?
      <br>
      <label><input type="radio" name="lelah" value="yes"> Yes</label>
      <label><input type="radio" name="lelah" value="no"> No</label>
    </div>

    <div class="pertanyaan">
      4. Apakah Anda sering terpapar debu atau polusi setiap hari?
      <br>
      <label><input type="radio" name="debu" value="yes"> Yes</label>
      <label><input type="radio" name="debu" value="no"> No</label>
    </div>

    <div class="pertanyaan">
      5. Apakah Anda mengalami demam atau meningkatnya suhu badan baru-baru ini?
      <br>
      <label><input type="radio" name="demam" value="yes"> Yes</label>
      <label><input type="radio" name="demam" value="no"> No</label>
    </div>

    <div class="pertanyaan">
      6. Apakah Anda merasakan nyeri atau sakit pada dada saat bernapas?
      <br>
      <label><input type="radio" name="nyeri" value="yes"> Yes</label>
      <label><input type="radio" name="nyeri" value="no"> No</label>
    </div>

    <button type="submit">Lihat Hasil Tes</button>
  </form>
</section>

<section id="halamanHasil" class="hidden">
  <h2>üìä Hasil Tes & Saran</h2>
  <div id="hasil"></div>
  <br>
  <button onclick="kembaliHome()">‚¨ÖÔ∏è Kembali ke Halaman Utama</button>
</section>

<script>
/* ===================== DATA PENYAKIT ===================== */
const penyakitData = {
  asma: {
    info: `
      <b>Asma</b> adalah penyakit kronis pada saluran pernapasan yang menyebabkan peradangan dan penyempitan.
      <br><br><b>Gejala:</b><br>
      ‚Ä¢ Sesak napas<br>
      ‚Ä¢ Batuk berulang (sering malam hari)<br>
      ‚Ä¢ Mengi (bunyi ngik-ngik)<br>
      ‚Ä¢ Dada terasa berat<br>
      <br><b>Penyebab:</b><br>
      ‚Ä¢ Alergi (debu, bulu hewan)<br>
      ‚Ä¢ Udara dingin<br>
      ‚Ä¢ Polusi/asap rokok<br>
      ‚Ä¢ Riwayat keluarga
    `,
    saran: `
      Saran:
      - Hindari pemicu seperti debu, asap rokok, atau parfum kuat
      - Gunakan masker saat udara buruk
      - Olahraga ringan teratur seperti yoga atau berenang
      - Ikuti penggunaan inhaler sesuai anjuran dokter
      - Jaga kualitas udara rumah (humidifier / air purifier)
      
      Rekomendasi:
      - Dokter Spesialis Paru (Pulmonolog)
      - Dokter Alergi bila dipicu alergi
    `
  },
  bronkitis: {
    info: `
      <b>Bronkitis</b> adalah peradangan pada saluran bronkus yang menyebabkan produksi lendir berlebih.
      <br><br><b>Gejala:</b><br>
      ‚Ä¢ Batuk berdahak<br>
      ‚Ä¢ Sesak napas<br>
      ‚Ä¢ Dada berat/nyeri<br>
      ‚Ä¢ Demam ringan<br>
      <br><b>Penyebab:</b><br>
      ‚Ä¢ Infeksi virus atau bakteri<br>
      ‚Ä¢ Paparan asap rokok<br>
      ‚Ä¢ Polusi udara
    `,
    saran: `
      Saran:
      - Minum banyak air untuk mengencerkan dahak
      - Istirahat cukup dan hindari aktivitas berat
      - Gunakan humidifier agar napas lebih lega
      - Hindari asap rokok dan udara dingin ekstrim
      
      Rekomendasi:
      - Dokter Umum untuk kasus ringan
      - Dokter Spesialis Paru jika sering kambuh atau kronis
    `
  },
  ppok: {
    info: `
      <b>PPOK</b> adalah penyakit kronis yang menyebabkan aliran udara tersumbat secara permanen.
      <br><br><b>Gejala:</b><br>
      ‚Ä¢ Sesak berkepanjangan<br>
      ‚Ä¢ Batuk berdahak kronis<br>
      ‚Ä¢ Penurunan berat badan<br>
      <br><b>Penyebab:</b><br>
      ‚Ä¢ Merokok (utama)<br>
      ‚Ä¢ Asap kimia/industri<br>
      ‚Ä¢ Polusi jangka panjang
    `,
    saran: `
      Saran:
      - Hindari asap rokok sepenuhnya
      - Latihan pernapasan (diaphragm / pursed-lip breathing)
      - Konsumsi makanan tinggi protein
      - Kurangi aktivitas berat saat polusi tinggi
      
      Rekomendasi:
      - Dokter Spesialis Paru
      - Terapi pernapasan dari fisioterapis
    `
  },
  kanker: {
    info: `
      <b>Kanker Paru-paru</b> terjadi akibat pertumbuhan sel tidak normal di jaringan paru.
      <br><br><b>Gejala:</b><br>
      ‚Ä¢ Batuk lama / berdarah<br>
      ‚Ä¢ Nyeri dada<br>
      ‚Ä¢ Penurunan berat badan<br>
      ‚Ä¢ Sesak napas
      <br><b>Penyebab:</b><br>
      ‚Ä¢ Merokok<br>
      ‚Ä¢ Asap rokok pasif<br>
      ‚Ä¢ Paparan zat kimia berbahaya
    `,
    saran: `
      Saran:
      - Berhenti merokok total
      - Jaga pola makan kaya antioksidan
      - Lakukan aktivitas fisik ringan sesuai kemampuan
      - Ikuti setiap jadwal kontrol rumah sakit
      
      Rekomendasi:
      - Spesialis Paru
      - Onkologi
      - Bedah Toraks (jika diperlukan)
    `
  },
  pneumonia: {
    info: `
      <b>Pneumonia</b> adalah infeksi paru yang menyebabkan alveoli terisi cairan.
      <br><br><b>Gejala:</b><br>
      ‚Ä¢ Demam tinggi<br>
      ‚Ä¢ Batuk berdahak kental<br>
      ‚Ä¢ Nyeri dada<br>
      ‚Ä¢ Sesak napas
      <br><b>Penyebab:</b><br>
      ‚Ä¢ Bakteri<br>
      ‚Ä¢ Virus<br>
      ‚Ä¢ Jamur
    `,
    saran: `
      Saran:
      - Banyak minum air dan istirahat
      - Gunakan obat antibiotik / antiviral sesuai dokter
      - Latihan napas dalam perlahan
      - Vaksin influenza / pneumokokus bila dianjurkan
      
      Rekomendasi:
      - Dokter Umum untuk kasus ringan
      - Spesialis Paru jika tidak membaik dalam 48‚Äì72 jam
    `
  }
};

/* ===================== CHANGE INFO ===================== */
const penyakitSelect = document.getElementById("penyakitSelect");
const infoPenyakit = document.getElementById("infoPenyakit");

penyakitSelect.addEventListener("change", function () {
  const p = this.value;
  if (p && penyakitData[p]) {
    infoPenyakit.innerHTML = penyakitData[p].info;
    infoPenyakit.classList.remove("hidden");
  } else {
    infoPenyakit.classList.add("hidden");
  }
});

/* ===================== PAGE NAV ===================== */
function bukaTes() {
  document.getElementById("halamanInformasi").classList.add("hidden");
  document.getElementById("halamanTes").classList.remove("hidden");
  window.scrollTo({ top: 0, behavior: "smooth" });
}
function kembaliHome() {
  document.getElementById("halamanHasil").classList.add("hidden");
  document.getElementById("halamanTes").classList.add("hidden");
  document.getElementById("halamanInformasi").classList.remove("hidden");
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* ===================== SCORING ===================== */
const bobotPenyakit = {
  asma:    { batuk:10, sesak:30, lelah:10, debu:20, demam:5, nyeri:5 },
  bronkitis:{ batuk:30, sesak:15, lelah:5, debu:20, demam:20, nyeri:10 },
  ppok:    { batuk:25, sesak:30, lelah:10, debu:25, demam:5, nyeri:5 },
  pneumonia:{ batuk:20, sesak:25, lelah:20, debu:5, demam:25, nyeri:5 },
  kanker:  { batuk:25, sesak:15, lelah:10, debu:10, demam:5, nyeri:35 }
};

function getRadioValue(name) {
  const el = document.querySelector("input[name='" + name + "']:checked");
  return el ? el.value : null;
}

document.getElementById("formTes").addEventListener("submit", function (e) {
  e.preventDefault();

  const jawaban = {
    batuk: getRadioValue("batuk"),
    sesak: getRadioValue("sesak"),
    lelah: getRadioValue("lelah"),
    debu: getRadioValue("debu"),
    demam: getRadioValue("demam"),
    nyeri: getRadioValue("nyeri")
  };

  for (const k in jawaban) {
    if (jawaban[k] === null) {
      alert("Harap jawab semua pertanyaan sebelum melihat hasil.");
      return;
    }
  }

  const hasilSkor = {};
  for (const penyakit in bobotPenyakit) {
    let skor = 0;
    const bobot = bobotPenyakit[penyakit];
    for (const g in jawaban) {
      if (jawaban[g] === "yes") skor += (bobot[g] || 0);
    }
    const totalBobot = Object.values(bobot).reduce((a,b)=>a+b,0);
    hasilSkor[penyakit] = Math.round((skor / totalBobot) * 100);
  }

  const entries = Object.entries(hasilSkor).sort((a,b)=> b[1] - a[1]);
  const topName = entries[0][0];
  const topPersen = entries[0][1];

  let html = `
    <div class="hasil-card">
      <div class="hasil-title">Kemungkinan berdasarkan gejala:</div>
      <ul>
  `;

  entries.slice(0,3).forEach(([nama, persen]) => {
    html += `<li><b>${nama.toUpperCase()}</b>: ${persen}%</li>`;
  });

  html += `
      </ul>
      <hr>
      <div><b>Kemungkinan terbesar:</b> ${topName.toUpperCase()} ‚Äî ${topPersen}%</div>
      <br>
      <div>${penyakitData[topName].saran.replace(/\n/g,"<br>")}</div>
      <br>
      <small>‚ö†Ô∏è Ini hanya evaluasi berbasis gejala. Konsultasikan ke tenaga medis untuk diagnosis pasti.</small>
    </div>
  `;

  document.getElementById("hasil").innerHTML = html;
  document.getElementById("halamanTes").classList.add("hidden");
  document.getElementById("halamanHasil").classList.remove("hidden");
  window.scrollTo({ top: 0, behavior: "smooth" });
});
</script>

</body>
</html>
